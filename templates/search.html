<script src="{{ url_for('static', filename = 'bootstrap.min.js') }}"></script>    

{% extends "base.html" %}

{% block title %}ì—˜ë¦¬ìŠ¤ ë„ì„œê´€ > ê²€ìƒ‰ê²°ê³¼{% endblock %}

{% block page_content %}    
    <h2 class="book-list-title"> ğŸ” "{{ keyword }}" ê´€ë ¨ ì±… ëª©ë¡ ğŸ” <span style="font-family: 'EliceDigitalBaeum_Bold'; font-size:30px;">( ì´ {{ count }}ê±´ )</span></h2><br>
    {% if book_list.items %}
    <div class='row'>
        <div class="col-lg-6">
            {% if session['id'] %}
                <div>
                    <span class="main-description"> <span style='color:blue'>ëŒ€ì—¬í•˜ê¸°</span>ë¥¼ ëˆŒëŸ¬ ì±…ì„ ëŒ€ì—¬í•´ë³´ì„¸ìš”.</span>
                    <br><span class="main-description"> <span style='color:#02a1d1'>ëŒ€ì—¬ê¸°ê°„</span>ì€ 2ì£¼ì…ë‹ˆë‹¤.</span>
                    <br><span class="main-description"> <span style='color:#ff7d03'>ê°€ëŠ¥í•œ ëŒ€ì—¬ê¶Œìˆ˜</span>ëŠ” 5ê¶Œì…ë‹ˆë‹¤.</span>
                </div>
            {% else %}
                <span class="main-description"> <a href="{{ url_for('auth.login')}}" style='color:blue;cursor:pointer;'>ë¡œê·¸ì¸</a>í•˜ê³  ì±…ì„ ëŒ€ì—¬í•´ë³´ì„¸ìš”.</span><p></p><br>
            {% endif %}
        </div>
        <div class="col-lg-6">
            <form action="{{url_for('main.search')}}" class="input-group searchbox">
                <input type="text" class="form-control rounded" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”" name="keyword" />
                <button type="submit" class="btn btn-outline-primary">Search</button>
            </form>
        </div>
    </div>
<section style="margin:25px 60px 0 60px;">
  <div class="container">
    <div class="row">
      <!--ADD CLASSES HERE d-flex align-items-stretch-->
      {% for book in book_list.items %}
      <div class="col-lg-3 mb-3 d-flex align-items-stretch" >
        <div class="card text-center"  style="width:400px;padding:10px;border-radius:15px;">
            <img class="align-self-center" src = "{{ url_for('static', filename='{}'.format(book.img_path)) }}" style="max-width: auto; max-height: 150px;" alt="Book Image">
          <div class="card-body  d-flex flex-column">
            <div class="card-title mb-auto">{{ book.book_name }}</div>
            <div style="margin-bottom:10px;" class="card-text mt-auto main-content">
                {% if book.count <= 1 %} 
                    <span style="color:red">{{ book.count }} ê¶Œ ë‚¨ìŒ</span><p></p>
                {% else %}
                    {{ book.count }} ê¶Œ ë‚¨ìŒ<p></p>
                {% endif %}
                {% for i in range(book.rating|round|int) %}
                    <span class="star">â­</span>
                {% endfor %}
                {% for i in range(5 - (book.rating|round|int)) %}
                    <span class="notstar">â­</span>
                {% endfor %}
            </div>
            <a href="/detail/{{ book.id }}" class="stretched-link"></a>
            {% if session['id'] %}
            <div class="btn btn-primary mt-auto align-self-center second" style="width:180px;" data-bs-toggle="modal" data-bs-target="#RentalModal{{book.id}}" >ëŒ€ì—¬í•˜ê¸°</div>
            
            {% endif %}
          </div>
        </div>
      </div>
      <!-- basic modal -->
        <div class="modal fade" id="RentalModal{{book.id}}" tabindex="-1" role="dialog" aria-labelledby="RentalModal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content rounded-6 shadow">
                    <div class="modal-header border-bottom-0">
                        <h4 class="modal-title" id="myModalLabel">ëŒ€ì—¬í•˜ê¸°</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <h5><span style="font-weight:bold;">[ {{book.book_name}} ]</span>ì„ ëŒ€ì—¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</h5>
                    </div>
                    <div class="modal-footer flex-column border-top-0">
                        <form action="{{ url_for('main.rental', book_id=book.id)}}" class="w-100">
                            <button type="submit" class="btn btn-lg btn-outline-primary w-100 mx-0 mb-2" style="width:100px;">ëŒ€ì—¬í•˜ê¸°</button>
                        </form>
                        <button type="button" class="btn btn-lg btn-light w-100 mx-0" data-bs-dismiss="modal">Close</button>
                        
                    </div>
                </div>
            </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>
    <!-- í˜ì´ì§•ì²˜ë¦¬ ì‹œì‘ -->
    <ul class="pagination justify-content-center" style="margin-top:20px;">
        <!-- ì´ì „í˜ì´ì§€ -->
        {% if book_list.has_prev %}
        <li class="page-item">
            <a class="page-link" href="{{url_for('main.search', page=book_list.prev_num,  keyword=keyword)}}">&laquo</a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <a class="page-link" tabindex="-1" aria-disabled="true" href="#">&laquo</a>
        </li>
        {% endif %}
        {% for page_num in book_list.iter_pages() %}
            {% if page_num %}
                {% if page_num != book_list.page %}
                <li class="page-item">
                    <a class="page-link" href="{{ url_for('main.search', page=page_num,  keyword=keyword) }}" >{{ page_num }}</a>
                </li>
                {% else %}
                <li class="page-item active" aria-current="page">
                    <a class="page-link" href="{{ url_for('main.search', page=page_num,  keyword=keyword) }}">{{ page_num }}</a>
                </li>
                {% endif %}
           {% else %}
                <li class="disabled">
                    <a class="page-link" href="#">...</a>
                </li>
           {% endif %}
        {% endfor %}
        <!-- ë‹¤ìŒí˜ì´ì§€ -->
        {% if book_list.has_next %}
        <li class="page-item">
            <a class="page-link" href="{{ url_for('main.search', page=book_list.next_num,  keyword=keyword) }}">&raquo;</a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <a class="page-link" tabindex="-1" aria-disabled="true" href="#">&raquo;</a>
        </li>
        {% endif %}
    </ul>
    <!-- í˜ì´ì§•ì²˜ë¦¬ ë -->
    
    {% else %}
        <h2 class="book-list-title"> ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì–´ìš”...</h2>
        <form action="{{ url_for('main.home')}}">
            <input class="book-list-title btn btn-warning" type="submit" value="ë©”ì¸ìœ¼ë¡œ">
        </form>
    {% endif %}
    

{% endblock %}
